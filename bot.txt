const fs = require('fs'); 

const qrcode = require('qrcode-terminal');

const { Client, Chat, PrivateChat, GroupChat, Message, MessageMedia, Contact, PrivateContact, BusinessContact, ClientInfo, Location, LocalAuth, Buttons, Label } = require('whatsapp-web.js');



const bdiade = require('/Users/feder/OneDrive/Escritorio/bot-whatsapp/bdiade.json');



const country_code = "54";
const number = "91126642674";
let button = new Buttons("Me active papi, que se hace?üòà",[{body:'FINALIZA PROMO'},{body:'Final Promo'},{body: 'Persona Wsp'}],'BOT ACTIVADO','(Presione una letra/opci√≥n para responder)');
let button2 = new Buttons("Menu Control Part-2",[{body:'Persona Wsp'}]);
const msg = button;


const client = new Client({
    authStrategy: new LocalAuth({
        clientId: "client-one"
    })
});

client.initialize();



client.on('qr', (qr) => {
    qrcode.generate(qr, {
        small: true
    });
});

client.on('ready', () => {
    console.log('El cliente esta listo');

    let chatId = country_code + number + "@c.us";

    client.sendMessage(chatId, msg).then(
        (response) => {
            if (response.id.fromMe) {
                console.log('Me active papi, que se hace?');
            }
        }
    )
});

client.on('authenticated', (session) => {
    session = client.authStrategy;
});


client.on('auth_failure', msg => {
    console.error('Hubo un fallo en la autenticaci√≥n', msg);
});


// extraer numeros 

const chatsArr = [];

client.on('ready',async()=>{
    
    
    const extractNumLabel = async (labelName)=> {
        const labels = await client.getLabels();

        const miEtiqueta = labels.find(label => label.name === labelName);
        console.log(miEtiqueta);
        if (!miEtiqueta) return;

        const chats = await client.getChatsByLabelId(miEtiqueta.id);
        console.log(chats.length);

        chats.forEach(chat => chatsArr.push(chat.id._serialized));
        

    }
    
         extractNumLabel('FinalizaPromo15');

        
});




    
// id random
let idRandom = ()=>{var id = "";
var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

for(var i=0; i < 6; i++)
  id += chars.charAt(Math.floor(Math.random() * chars.length));

id += "-";

for(var i=0; i < 6; i++)
  id += chars.charAt(Math.floor(Math.random() * chars.length));

return id;}

async function sendMessage(from, text){
    console.log('Enviando mensaje a @'+from+'.');
}

// promesa de espera mensaje
const awaitTimeout = delay => new Promise(resolve => setTimeout(resolve, delay));
let delay = 1500;



// OPCIONES DE MENSAJE
let msgA = `üéâContamos con una promoci√≥n que no te podes perder, *inscribi√©ndote y abonando el d√≠a de hoy tenes un 60%*\n*Serian $14.000 total de los $24.000 valor habitual/com√∫n* (por 2 cursos abonando el dia de hoy, ma√±ana o pasado, si necesita m√†s Cursos *consulte por promoci√≥n*)\n\nA medida que van pasando los d√≠as se va bajando el descuento hasta el  final ($24.000)*üïí‚ÄºÔ∏è\n\n-Se puede abonar con transferencia, dep√≥sito, Rapipago, Pagofacil, Tarjeta de Cr√©dito/D√©bito, MercadoPago.\n*D√≠game por aqu√≠ si tiene alguna duda en particular en cuanto a metodolog√≠a, certificaciones*`;
let msgAB = `Nuestros cursos se llevan a cabo *online a trav√©s de nuestra plataforma de aprendizaje en nuestro sitio web*. Al inscribirse, tendr√° acceso a *clases audiovisuales* y *manuales de estudio* para ver uno y luego leer el otro. Si surge alguna duda, *puede solicitar ayuda adicional a un tutor*. El curso es asincr√≥nico, por lo que *usted podr√° estudiar en la medida en que disponga de tiempo*. Una vez que se sienta seguro, puede realizar el *examen en la misma plataforma*. El examen es una prueba de selecci√≥n m√∫ltiple y, si se obtienen un *70% de respuestas correctas, se emitir√° un certificado de Escuelas IADE*. Con este certificado puede tramitar los otros que tienen validez en Estados Unidos y en los pa√≠ses del Mercosur.`;
let msgB = `Muchas gracias por su respuesta, ya mismo lo sacaremos de la lista de interesados. Saludos`;
let msgMenu = `Escuelas IADE *Cursos Online Certificados*\n\n *Promociones Especiales*üòä (Consulte aqu√≠)\n\n*PRESIONE/RESPONDA CON LA OPCI√ìN QUE QUIERA*:\n‚≠ï*A* PARA SABER SOBRE LA PROMOCI√ìN.\n‚≠ï*C* SI QUIERE UN AUDIO EXPLICATIVO.\n‚≠ï*CURSOS* SI QUIERE VER EL LISTADO DE CURSOS.\n‚≠ï*MENU* SI QUIERE VER EL MENU.\n‚≠ï*MATRICULA* SI QUIERE SABER SOBRE LA MATRICULA DE REFRIGERACI√ìN Y AIRE ACONDICIONADO.\n‚≠ï*CERTIFICADOS* SI QUIERE VER LOS CERTIFICADOS.`;
let msgMenuRAA = `Escuelas IADE *Cursos Online Certificados*\n\n *Promociones Especiales*üòä (Consulte aqu√≠)\n\n*PRESIONE/RESPONDA CON LA OPCI√ìN QUE QUIERA*:\n‚≠ï*A* PARA SABER SOBRE LA PROMOCI√ìN DEL DIA.\n‚≠ï*C* SI QUIERE UN AUDIO EXPLICATIVO DE LA PROMOCI√ìN.\n‚≠ï*CURSOS* SI QUIERE VER EL LISTADO DE CURSOS.\n‚≠ï*MENU* SI QUIERE VER EL MENU.\n‚≠ï*MATRICULA* SI QUIERE SABER SOBRE LA MATRICULA DE REFRIGERACI√ìN Y AIRE ACONDICIONADO.\n‚≠ï*CERTIFICADOS* SI QUIERE VER LOS CERTIFICADOS.\n‚≠ï*MAS INFORMACI√ìN* SI QUIERE VER MAS INFO DE ESTA PROMO.\n‚≠ï*TEMARIO COMPLETO* SI QUIERE VER EL TEMARIO COMPLETO DE REFRIGERACI√ìN Y AIRE ACONDICIONADO.`;
let = resumenPromo  = `En resumen, inscribi√©ndose y abonando el dia de hoy le quedar√≠a el *Curso a $16.000* con uno mas de regalo cualquiera a eleccion!`;
let temarioRAA = `Temario
Te mostramos el temario de nuestro curso de Refrigeraci√≥n y Aire Acondicionado.


*Con nuestro curso de Refrigeraci√≥n y Aire Acondicionado Podr√°s tramitar la Matricula, bajo la C√°mara Argentina de RefrigeracioÃÅn.*


17 Clases Audiovisuales + 10 Manuales De Estudio.

MoÃÅdulo 1

VIDEO 1: herramientas y materiales. MedicioÃÅn de diaÃÅmetros. Balonas. ExpansioÃÅn de canÃÉos. Soldadura con diferentes materiales (bronce y plata). CanÃÉeriÃÅas de cobre. Equipo Split. DescripcioÃÅn de compresor abierto. Despiece de compresor abierto. DeteccioÃÅn de fallas de un compresor abierto. Armado de un compresor. Equipos condensadores (hermeÃÅticos), funcionamiento, componentes, pruebas de presioÃÅn con manoÃÅmetro. Presostatos. MANUAL 1: manuales. La refrigeracioÃÅn. Temperatura. CaloriÃÅas y frigoriÃÅas. Calor especiÃÅfico y latente. PresioÃÅn, vaciÃÅo, presioÃÅn absoluta y relativa. ManoÃÅmetros. VacuoÃÅmetros. Principios de la refrigeracioÃÅn. Diferentes tipos. Componentes del sistema de refrigeracioÃÅn por compresioÃÅn. Tipos de compresores. Unidad condensadora. Fluidos refrigerantes. Almacenamiento, lubricantes. Refrigerantes ecoloÃÅgicos.

MoÃÅdulo 2

VIDEO 2: pinza amperomeÃÅtrica. Refrigerador familiar (cambio de compresor, deteccioÃÅn de peÃÅrdidas, vaciÃÅo del sistema, deshidratacioÃÅn del sistema, verificacioÃÅn del sistema eleÃÅctrico, deteccioÃÅn de fallas y carga del sistema). MANUAL 2: evaporadores. Compresor. Equipos hermeÃÅticos. Condensadores. Tubo recibidor. Filtro deshidratador. CaÃÅlculo de condensadores.

MoÃÅdulo 3

VIDEO 3: vitrina refrigerada con unidad condensadora hermeÃÅtica (instalacioÃÅn, reparacioÃÅn, carga de gas, diagnoÃÅstico general). MANUAL 3: elementos de expansioÃÅn. Controles automaÃÅticos. Termostatos. Presostatos. Accesorios. VaÃÅlvulas.

MoÃÅdulo 4

VIDEO 4: aire acondicionado de ventana (funcionamiento, verificaciones del sistema eleÃÅctrico, medicioÃÅn y presioÃÅn, despiece y armado, carga). MANUAL 4: electricidad. Trabajo mecaÃÅnico. Trabajo eleÃÅctrico. Potencia eleÃÅctrica. Corriente eleÃÅctrica. Tipos. Capacitores.

MoÃÅdulo 5

VIDEO 5: aire acondicionado SPLIT friÃÅo/calor por bomba de calor (componentes, funcionamiento, vaciÃÅo, des-obstruccioÃÅn de vaÃÅlvulas de servicio, explicacioÃÅn de carga, deteccioÃÅn de fugas, descripcioÃÅn del aparato, tablero de conexiones eleÃÅctricas, fallas posibles, resolucioÃÅn, controles y funciones, problemas eleÃÅctricos, instalacioÃÅn del equipo condensador en exteriores, pinza amperomeÃÅtrica, funcionamiento y uso. VIDEO 5.1: INSTALACIOÃÅN AIRE ACONDICIONADO SPLIT NUEVO Paso a paso de la instalacioÃÅn. MANUAL 5: magnetismo. Electromagnetismo. InduccioÃÅn electromagneÃÅtica. Motores eleÃÅctricos. Corriente trifaÃÅsica. Motor trifaÃÅsico. Sistemas de arranque estrella-triaÃÅngulo.

MoÃÅdulo 6

VIDEO 6: CaÃÅmaras frigoriÃÅficas de conservacioÃÅn (funcionamiento, componentes, conexionado eleÃÅctrico, tableros de comando, sensores, controles automaÃÅticos, diagnoÃÅstico, medicioÃÅn de presiones). MANUAL 6: unidades familiares y comerciales. ConservacioÃÅn del producto. Calor especiÃÅfico. Ciclo de compresioÃÅn.

MoÃÅdulo 7

VIDEO 7: CaÃÅmaras frigoriÃÅficas de congelacioÃÅn (funcionamiento, componentes, conexionado eleÃÅctrico, tableros de comando, sensores, controles automaÃÅticos, diagnoÃÅstico, medicioÃÅn de presiones) MANUAL 7: acondicionamiento del aire (enfriamiento, deshumedecimiento, humedecimiento). Instrumentos. PsicrometriÃÅa. Acondicionadores centrales.

MoÃÅdulo 8

VIDEO 8: aire acondicionado del automoÃÅvil (funcionamiento, componentes, medicioÃÅn de presiones, explicacioÃÅn de carga, diagnoÃÅsticos). Gases ecoloÃÅgicos, uso y consideraciones. RecuperacioÃÅn y reciclaje de refrigerante. Recarga de gas y vaciÃÅo y carga de gas. MANUAL 8: acondicionador familiar de ventana. InstalacioÃÅn de A/A de ventana (en pared, ventana, travesanÃÉo). Diferencia de temperatura. Equipos con tubo capilar (averiÃÅas).

MoÃÅdulo 9

VIDEO 9: Moto compresor para gas ecoloÃÅgico 134a. Caja de conexiones eleÃÅctricas. Cambio de filtro deshidratador. Filtro de gas ecoloÃÅgico. VaÃÅlvula de expansioÃÅn termostaÃÅtica. ManoÃÅmetros para 134a. Uso de gas nitroÃÅgeno. VaÃÅlvulas de escape. Limpieza del circuito. Detector de fuga. Bomba de vaciÃÅo. Lubricante ecoloÃÅgico. Filtro deshidratador. MANUAL 9: heladeras familiares (fallas eleÃÅctricas, mecaÃÅnicas, carga de gas). Heladeras comerciales (fallas eleÃÅctricas, carga de gas). Sellos y placas de vaÃÅlvulas. Fallas en aire acondicionado. Funcionamiento incorrecto del compresor, aÃÅrbol de fallas y soluciones. Refrigerantes R134a generalidades, cambio de R12 a R134a carga, mantenimiento de equipos con R134a.

MoÃÅdulo 10

VIDEO 10: Funcionamiento y componentes. Acondicionador Indirecto. Acondicionador Split Casete. Acondicionador Split 5 toneladas. Acondicionador de tipo mochila. Unidades Exteriores Condensadoras. Chiller Marca York. Torres de enfriamiento. MANUAL 10: instalacioÃÅn industrial (montaje, componentes, humedad, tuberiÃÅa, aceite, planificacioÃÅn, tuberiÃÅas, vaciÃÅo, soplado, carga, ajuste, prueba, soldaduras). Unidad Split (instalacioÃÅn, canÃÉeriÃÅa y drenaje, unidades interior y exterior, purgado). Aire acondicionado para automoÃÅviles.

MoÃÅdulo 11

VIDEO 11: Compresores Semi hermeÃÅticos. DescripcioÃÅn del equipo. DeteccioÃÅn de fallas. VIDEO 11.1: Sistema de freezer con friÃÅo seco. Cambio de moto compresor. Limpieza de canÃÉeriÃÅas. InstalacioÃÅn de un moto compresor. DeteccioÃÅn de fugas. Elementos interiores. Diagrama eleÃÅctrico.

MoÃÅdulo 12

VIDEO 12: PLACA PRINCIPAL AIRE ACONDICIONADO (1:53) Placa principal. BuÃÅsqueda de un integrado en internet. Sensores. Fallas. MedicioÃÅn de moto compresor. MedicioÃÅn de condensador. Fallas control remoto.

MoÃÅdulo 13, 14, 15

VIDEO 13: CAMBIO DE COMPRESOR EN HELADERA PARTE 1 ‚Äì (1:47) VIDEO 13.1: CAMBIO DE COMPRESOR EN HELADERA PARTE 2 ‚Äì (2:07)

Modulo 16

RefrigeracioÃÅn del AutomoÃÅvil.`;
// Este menu esta despues de todos los mensajes para que puedan solicitar nuevamente el menu
const menuAzafata = new Buttons("Para ver nuevamente el Menu, presione el Bot√≥n de abajo",[{body:'MENU'}],'MENU Escuelas IADE','Federico Escuelas IADE, area Promociones');

//regex msg

const expresionRegular = /s[a√°]ber[\s]*m[a√°]s\d*/gi;
const coincide = expresionRegular.test(msg.body);

//
//opciones de mensaje


client.on('message', async (msg) => {

    //regex msg

    const expresionRegular = new RegExp(/s[a√°]ber[\s]*m[a√°]s\d*/gi);
    const coincide = expresionRegular.test(msg.body);

        //OPCION A
    if (msg.body == "a" || msg.body == "A" || msg.body == "aa") {
        await awaitTimeout(delay);
        sendMessage(msg.from, msgA);
        await awaitTimeout(3000);
        sendMessage(msg.from, '*Metodolog√≠a de Estudio:*');
        await awaitTimeout(3000);
        sendMessage(msg.from, msgAB);
        await awaitTimeout(3000);
        sendMessage(msg.from, "En resumen, inscribi√©ndose y abonando el dia de hoy le quedar√≠a el *Curso a $12.000 con uno mas de regalo!*");
        await awaitTimeout(5000);
        sendMessage(msg.from,menuAzafata);
        //OPCION B
    } else if (msg.body == "b" || msg.body == "B" || msg.body == "bb" || msg.body == "*B*") {
        await awaitTimeout(5000);
        sendMessage(msg.from, msgB);
        //OPCION C
    } else if (msg.body == "c" || msg.body == "C" || msg.body == "cc"|| msg.body == "*C*") {
        await awaitTimeout(2000);
        //OPCION C 1 MSG
        sendMessage(msg.from, '*Metodolog√≠a explicada en audio:*');
        await awaitTimeout(5000);
        //OPCION C 2 MSG (AUDIO 1)
        const hasil = fs.readFileSync('media/audio/metodologia-audio.ogg', {encoding: 'base64'});
        const media = new MessageMedia('audio/ogg', hasil);
        sendMessage(msg.from,media, { sendAudioAsVoice: true});
        await awaitTimeout(5000);
        //OPCION C 3 MSG 
        sendMessage(msg.from, '*Promoci√≥n explicada en audio:*');
        const hasil2 = fs.readFileSync('media/audio/promocion-audio.ogg', {encoding: 'base64'});
        const media2 = new MessageMedia('audio/ogg', hasil2);
        sendMessage(msg.from,media2, { sendAudioAsVoice: true});
        await awaitTimeout(5000);
        
        //OPCION C 4 MSG (AUDIO 2)
        const hasil3 = fs.readFileSync('media/audio/promocion-audio2.ogg', {encoding: 'base64'});
        const media3 = new MessageMedia('audio/ogg', hasil3);
        sendMessage(msg.from,media3, { sendAudioAsVoice: true});
        sendMessage(msg.from, resumenPromo); 
        await awaitTimeout(5000);
        await awaitTimeout(5000);
        sendMessage(msg.from,menuAzafata);
        //saber mas sasha
    }else if(coincide){
        await awaitTimeout(5000);
        sendMessage(msg.from, msgA); 
        await awaitTimeout(5000);
        sendMessage(msg.from, msgAB); 
        await awaitTimeout(5000);
        sendMessage(msg.from, resumenPromo); 
        await awaitTimeout(5000);
        sendMessage(msg.from, menuAzafata); 
        await awaitTimeout(5000);
        //OPCION MATRICULA 
    }else if (msg.body == "Matricula" || msg.body == "matricula" || msg.body == "matriculaci√≥n" || msg.body == "Matriculaci√≥n" || msg.body == "Matriculacion" || msg.body == "*MATRICULA*"  || msg.body == "MATRICULA" ){  
        let hasilMatri = fs.readFileSync('media/images/raa/banner-promo-2x1-2.png', {encoding: 'base64'});
        let mediaMatri = new MessageMedia('image/png', hasilMatri);
        let hasilMatri2 = fs.readFileSync('media/images/raa/banner-matricula.png', {encoding: 'base64'});
        let mediaMatri2 = new MessageMedia('image/png', hasilMatri2);
        await awaitTimeout(5000);
        sendMessage(msg.from, "Aqu√≠ le dejo toda la informaci√≥n sobre la *Promoci√≥n* del Curso de *Refrigeraci√≥n y Aire Acondicionado* y *Plaquetas Electr√≥nicas de Aires y Heladeras*:");
        await awaitTimeout(5000);
        sendMessage(msg.from, mediaMatri);
        await awaitTimeout(5000);
        sendMessage(msg.from, mediaMatri2);
        //MENU RAA
        let button = new Buttons(msgMenuRAA,[{body:'MAS INFORMACI√ìN'},{body:'TEMARIO COMPLETO'},{body:'C'}],'MENU PROMO MUNDIAL','Federico Escuelas IADE, area Promociones');
        sendMessage(msg.from,button);
        await awaitTimeout(5000);
        sendMessage(msg.from, "Si quiere saber mas informaci√≥n presione cualquier boton del menu o cons√∫lteme por aqu√≠.");
        await awaitTimeout(5000);
        sendMessage(msg.from,menuAzafata);
        // OPCION MAS INFORMACI√ìN
    } else if (msg.body == "MAS INFORMACI√ìN" || msg.body == "Mas informaci√≥n" || msg.body == "*MAS INFORMACI√ìN*" ){
        await awaitTimeout(5000);
        let hasilMatri3 = fs.readFileSync('media/images/raa/banner-raa-0.png', {encoding: 'base64'});
        let mediaMatri3 = new MessageMedia('image/png', hasilMatri3);
        let hasilMatri4 = fs.readFileSync('media/images/raa/banner-raa-1.png', {encoding: 'base64'});
        let mediaMatri4 = new MessageMedia('image/png', hasilMatri4);
        await awaitTimeout(5000);
        sendMessage(msg.from, mediaMatri3);
        await awaitTimeout(5000);
        sendMessage(msg.from, mediaMatri4);
        await awaitTimeout(5000);
        await awaitTimeout(5000);
        sendMessage(msg.from,menuAzafata);
    }else if (msg.body == "TEMARIO COMPLETO" || msg.body == "TEMARIO" || msg.body == "Temario Completo" || msg.body == "*TEMARIO COMPLETO*" || msg.body == "Refrigeraci√≥n y Aire Acondicionado" || msg.body == "Refrigeraci√≥n" || msg.body == "RAA"){
        await awaitTimeout(5000);
        sendMessage(msg.from, temarioRAA);
        await awaitTimeout(5000);
        await awaitTimeout(5000);
        sendMessage(msg.from,menuAzafata);
        //OPCION Opciones
    }else if (msg.body == "Opciones" || msg.body == "OPCIONES" || msg.body == "opciones" ){
        sendMessage(msg.from, "*Opciones:*\n-Activar promo\n-Activar Promo Wsp\n Solo tenemos estas :(");
        //OPCION ACTIVAR PROMO
    } else if (msg.body == "Activar Promo" || msg.body == "Activar promo") {
        sendMessage(msg.from, "*Activando Promo Mail...*");
        await awaitTimeout(1500);
        sendMessage(msg.from, "*.*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . . .*");
        await awaitTimeout(1500);
        promoMail();
        await awaitTimeout(1500);
        sendMessage(msg.from, "*Promo Activada con √©xito*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*Que tengas suerte en las ventas se√±or Federico üòàüêâ*");
        //OPCION ACTIVAR PROMO WSP
    }else if (msg.body == "Activar Promo Wsp" || msg.body == "Activar promo wsp"|| msg.body == "activar promo wsp"){
        await awaitTimeout(1500);
        sendMessage(msg.from, "Activando Promo Wsp...");
        await awaitTimeout(1500);
        sendMessage(msg.from, "*.*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . . .*");
        promoWsp();
        await awaitTimeout(1500);
        sendMessage(msg.from, "*...Promo activada con √©xito!*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*Que tengas suerte en las ventas se√±or Federico üòàüêâ*");
        await awaitTimeout(1500);
            //OPCION MENU
    } else if (msg.body == "MENU" || msg.body == "Menu" || msg.body == "menu"|| msg.body == "Men√∫" || msg.body == "*MENU*") {
        await awaitTimeout(2000);
        let button = new Buttons(msgMenu,[{body:'A'},{body:'C'},{body:'LISTADO DE CURSOS'}],'MENU ESCUELAS IADE','Federico Escuelas IADE, area Promociones');
        let button2 = new Buttons("Presione cualquier bot√≥n para seleccionar la opci√≥n correcta, enviando Menu se le enviara nuevamente el MENU de Escuelas IADE",[{body:'METODOLOGIA'},{body:'MATRICULA'},{body:'CERTIFICADOS'}],'MENU Parte 2','Federico Escuelas IADE, area Promociones');
        sendMessage(msg.from,button);
        await awaitTimeout(2000);
        sendMessage(msg.from,button2);
        await awaitTimeout(2000);
    }else if (msg.body == "Cursos Disponibles" || msg.body == "Listado de Cursos" || msg.body == "Listado de cursos"|| msg.body == "listado"|| msg.body == "Cursos"|| msg.body == "Catalogo" || msg.body == "Catalogo Cursos" || msg.body == "CURSOS"|| msg.body == "cursos" || msg.body == "*CURSOS*" || msg.body == "*cursos*" || msg.body == "*LISTADO DE CURSOS*" || msg.body == "LISTADO DE CURSOS"|| msg.body == "Listado de cursos") {
        await awaitTimeout(1500);
        sendMessage(msg.from, "*CURSOS DISPONIBLES*:\n\n*REFRIGERACI√ìN Y AIRE ACONDICIONADO\n\n*PLAQUETAS ELECTR√ìNICAS\n\n*DISE√ëO Y CONFECCI√ìN DE VESTIMENTA\n\n*DISE√ëO DE MODA\n\n*EST√âTICA Y MASAJE CORPORAL\n\n*MASAJE TERAP√âUTICO ORIENTAL\n\n*COSMETOLOG√çA Y MAQUILLAJE\n\n*CUIDADO DE ADULTOS MAYORES\n\n*CONSTRUCCI√ìN\n\n*CONSTRUCCI√ìN EN SECO\n\n*SOLDADURA EL√âCTRICA Y HERRER√çA\n\n*MEC√ÅNICA DE MOTOS ALTA CILINDRADA\n\n*MECANICA DE MOTOS BAJA CILINDRADA\n\n*ELECTR√ìNICA DIGITAL\n\n*REPARACI√ìN DE CELULARES\n\n*REPARACI√ìN DE ELECTRODOM√âSTICOS Y LAVARROPAS\n\n*INSTALACIONES EL√âCTRICAS\n\n*ELECTRICIDAD Y ELECTR√ìNICA INDUSTRIAL\n\n*BOBINADO\n\n*MOTORES DIESEL\n\n*INYECCI√ìN ELECTR√ìNICA DIESEL\n\n*INYECCI√ìN ELECTR√ìNICA GNC\n\n*ELECTRICIDAD Y ELECTR√ìNICA AUTOMOTRIZ\n\n*MEC√ÅNICA GENERAL\n\n*FRENOS\n\n*INSTALADOR DE PANELES SOLARES\n\n*FOTOGRAF√çA Y ESTUDIO DIGITAL\n\n*CERRAJER√çA\n\n*INSTALACIONES SANITARIAS Y DE GAS\n\n*OFFICE B√ÅSICO\n\n*PELUQUER√çA\n\n*MANICURA\n\n*ADMINISTRACI√ìN Y GESTI√ìN EN SALUD \n\n*AUXILIAR EN CARDIOLOGIA \n\n*TRANSFORMACI√ìN DIGITAL(Marketing Digital)\n\n*AUXILIAR DE FARMACIA");
        await awaitTimeout(1500);
        sendMessage(msg.from,"Si quiere el temario del curso, solic√≠telo por aqu√≠ y se lo estar√© enviando para que pueda ver los contenidos que se ven en el Curso");
        await awaitTimeout(5000);
        sendMessage(msg.from,menuAzafata);
        // CERTIFICADOS
    }else if (msg.body == "CERTIFICADO" || msg.body == "CERTIFICADOS" || msg.body == "*CERTIFICADO*" || msg.body == "*CERTIFICADOS*" || msg.body == "certificados" || msg.body == "Certificados") {
        let hasilCert = fs.readFileSync('media/images/certificaciones/certificado-iade.png', {encoding: 'base64'});
        let mediaCert = new MessageMedia('image/png', hasilCert);
        let hasilCertStandard = fs.readFileSync('media/images/certificaciones/cert-standard-0.jpg', {encoding: 'base64'});
        let mediaCertStandard  = new MessageMedia('image/jpg', hasilCertStandard);
        let hasilCertStandard1 = fs.readFileSync('media/images/certificaciones/cert-standard-1.jpg', {encoding: 'base64'});
        let mediaCertStandard1 = new MessageMedia('image/jpg', hasilCertStandard1);
        await awaitTimeout(5000);
        sendMessage(msg.from, "Certificado de Escuelas IADE generado autom√°ticamente una ve aprueba el examen final en nuestro Campus Virtual:");
        await awaitTimeout(5000);
        sendMessage(msg.from, mediaCert);
        await awaitTimeout(5000);
        sendMessage(msg.from, "Certificado de Standard Lift:");
        await awaitTimeout(5000);
        sendMessage(msg.from, mediaCertStandard);
        await awaitTimeout(1500);
        sendMessage(msg.from, mediaCertStandard1);
        await awaitTimeout(5000);
        sendMessage(msg.from, "(Este Certificado y su Matricula son opcionales, se abonan a parte una vez finalizado y aprobado el curso, con el presente Certificado de Escuelas IADE)");
        await awaitTimeout(5000);
        sendMessage(msg.from,menuAzafata);
        // METODOLOGIA
    } else if (msg.body == "Metodolog√≠a" || msg.body == "Metodologia" || msg.body == "metodologia" || msg.body == "Modalidad" || msg.body == "Metodo de estudio" || msg.body == "METODOLOG√çA" || msg.body == "METODOLOGIA") {
        let hasil4 = fs.readFileSync('media/images/banner-0.png', {encoding: 'base64'});
        let media4 = new MessageMedia('image/png', hasil4);
        let hasil5 = fs.readFileSync('media/images/banner-1.png', {encoding: 'base64'});
        let media5 = new MessageMedia('image/png', hasil5);
        await awaitTimeout(2000);
        sendMessage(msg.from,media4);
        await awaitTimeout(1500);
        sendMessage(msg.from,media5);
        await awaitTimeout(5000);
        sendMessage(msg.from,menuAzafata);
    }else if (msg.body == "FINAL PROMO" || msg.body == "FINALIZA PROMO"){
        await awaitTimeout(1500);
        sendMessage(msg.from, "Activando Recordatorio de que finaliza promo...");
        await awaitTimeout(1500);
        sendMessage(msg.from, "*.*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . . .*");
        //finalPromo();
        promoPromesas();
        sendMessage(msg.from, "*...Mensajes masivos activados con √©xito!*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*Que tengas suerte en las ventas se√±or Federico üòàüêâ*");
    }else if(msg.body == "ENIVAR A"){
        await awaitTimeout(1500);
        sendMessage(msg.from, "Activando Recordatorio de que finaliza promo...");
        await awaitTimeout(1500);
        sendMessage(msg.from, "*.*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . . .*");
        sendCapA();
        sendMessage(msg.from, "*...Mensajes con la letra A enviados con √©xito!*");
        await awaitTimeout(500);

    }else if(msg.body == "Persona Wsp"){
        await awaitTimeout(1500);
        sendMessage(msg.from, "Activando Recordatorio de que finaliza promo...");
        await awaitTimeout(1500);
        sendMessage(msg.from, "*.*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . . .*");
        personWsp();
        sendMessage(msg.from, "*...Mensajes de 'Persona Wsp' enviados con √©xito!*");
        await awaitTimeout(500);
///////ACA
    }else if(msg.body == "Final Promo"){
        await awaitTimeout(1500);
        sendMessage(msg.from, "Activando Promo Promesas...");
        await awaitTimeout(1500);
        sendMessage(msg.from, "*.*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . . .*");
        finalPromo();
        sendMessage(msg.from, "*...Mensajes Promo Promesas enviados con √©xito!*");
        await awaitTimeout(500);
        
    }else if(msg.body == "Recordatorio de Promo 25/01"){
        await awaitTimeout(1500);
        sendMessage(msg.from, "Activando Recordatorio de Promo 25/01...");
        await awaitTimeout(1500);
        sendMessage(msg.from, "*.*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . .*");
        await awaitTimeout(500);
        sendMessage(msg.from, "*. . . . .*");
        recordatorioWsp();
        sendMessage(msg.from, "*...Mensajes Recordatorio de Promo 25/01 enviados con √©xito!*");
        await awaitTimeout(500);
        
}});








const noEnviados =[];

let horaLocal = new Date().toLocaleTimeString();
    horaLocal = horaLocal.slice(0, -6);
    horaLocal = parseInt(horaLocal);

// FUNCION PROMO

let promoMail =()=>{
    let msgSends = 0;
    function doLoop(i) {
        let alumno = bdiade[i];
        setTimeout(async  ()=> {
            const number = alumno.Telefono;
    
    
            const msgPromo = `Hola ${alumno.Nombre} ${horaLocal < 12 ? `buenos d√≠as`: `buenas tardes`}, me estoy comunicando desde Escuelas IADE *Cursos Online Certificados* porque usted alguna vez solicito informaci√≥n, quer√≠amos contarle que tenemos\n *Promociones Especiales*üòä de hasta *30%*(dependiendo dia de pago/M√âTODO)\nque quiz√° le podr√≠an interesar sobre el ${alumno.Curso}üßë‚Äçüéì.\n\n*PRESIONE/RESPONDA CON LA LETRA*:\nüéä*A* PARA SABER SOBRE LA PROMOCI√ìN.\nüéä*B* SI NO ESTAS INTERESADO. \nüéä*C* SI QUIERE UN AUDIO EXPLICATIVOüéä.\nüéä*CURSOS* SI QUIERE VER EL LISTADO DE CURSOSüéä.\nüéä*METODOLOG√çA* SI QUIERE VER LA METODOLOG√çA EN IM√ÅGENESüéä.`;
            const msgCodigo = `*Se le genero el c√≥digo √∫nico, util√≠celo para aplicar la promoci√≥n:*`;
        
            const msgCodigo2 = `*${idRandom()}*`;
            const chatId = number.substring(1) + "@c.us";
            let hasil3 = fs.readFileSync('media/images/banner-promo-17-11.png', {encoding: 'base64'});
            let media3 = new MessageMedia('image/png', hasil3);
                sendMessage(chatId, media3);
                let button = new Buttons(msgPromo,[{body:'A'},{body:'C'},{body:'LISTADO DE CURSOS'}],'Promoci√≥n Especial Escuelas IADE','(Presione una letra/opci√≥n para responder)\nFederico Escuelas IADE, area Promociones');
                sendMessage(chatId, button);
                await awaitTimeout(2000);
                sendMessage(chatId, "Responda por este medio para aprovechar la promo!");
              //  sendMessage(chatId, msgPromo);
                await awaitTimeout(2000);

            
            
            msgSends++;

        if(i < bdiade.length-1){
            doLoop(i+1); 
            }
        }, 10000);
        
        }
    
    doLoop(0);
    
}

// funcion promo wsp
let promoWsp =()=>{

    function doLoop(i) {
        let alumno = bdiade[i];
        setTimeout(async  ()=> {
            const number = alumno.Telefono;
    
            const msgPromo = `Hola ${alumno.Nombre ? `${alumno.Nombre}, buenas tardes `: `buenas tardes`}, me estoy comunicando desde Escuelas IADE *Cursos Online Certificados* porque usted alguna vez solicito informaci√≥n, quer√≠amos contarle que tenemos\n *Promociones Especiales*üòä de hasta *30%*(dependiendo dia de pago/M√âTODO)\nque quiz√° le podr√≠an interesar sobre el ${alumno.Curso ? `${alumno.Curso}` : `curso del cual solicito informaci√≥n!`}üßë‚Äçüéì.\n\n*PRESIONE/RESPONDA CON LA LETRA*:\nüéä*A* PARA SABER SOBRE LA PROMOCI√ìN.\nüéä*B* SI NO ESTAS INTERESADO. \nüéä*C* SI QUIERE UN AUDIO EXPLICATIVOüéä.\nüéä*CURSOS* SI QUIERE VER EL LISTADO DE CURSOSüéä.\nüéä*METODOLOG√çA* SI QUIERE VER LA METODOLOG√çA EN IM√ÅGENESüéä.`;
            const msgCodigo = `*Se le genero el c√≥digo √∫nico, util√≠celo para aplicar la promoci√≥n:*`;
        
            const msgCodigo2 = `*${idRandom()}*`;
            const chatId = number.substring(1) + "@c.us";
            let hasil3 = fs.readFileSync('media/images/banner-promo-17-11.png', {encoding: 'base64'});
            let media3 = new MessageMedia('image/png', hasil3);
                sendMessage(chatId, media3);
                let button = new Buttons(msgPromo,[{body:'A'},{body:'C'},{body:'LISTADO DE CURSOS'},{body:'METODOLOG√çA'}],'Promoci√≥n Especial Escuelas IADE','(Presione una letra/opci√≥n para responder)\nFederico Escuelas IADE, area Promociones');
                sendMessage(chatId, button);
                await awaitTimeout(2000);
                sendMessage(chatId, "Responda por este medio para aprovechar la promo!");
              //  sendMessage(chatId, msgPromo);
                await awaitTimeout(2000);

            

        if(i < bdiade.length-1){
            doLoop(i+1); 
            }
        }, 10000);
        
        }
    
    doLoop(0);
    
}

//  RECORDATORIO DE PROMO
let recordatorioWsp =async()=>{

    function doLoop(i) {
        let alumno = chatsArr[i];
        setTimeout(async  ()=> {
            //const number = alumno.Telefono;
            let alumno = chatsArr[i];
    
            const msgPromo0 = `Hola buenas, soy Federico nuevamente. Disculpe las molestias, tuvimos problemas t√©cnicos con los sistemas de mensajer√≠a en promo. Me estoy comunicando desde Escuelas IADE *Cursos Online Certificados* (area promociones) porque usted alguna vez solicito informaci√≥n sobre alguno de nuestros Cursos o sobre nuestro Catalogo de Cursos!. Me comunico desde el area de promociones ya que por pedido de los alumnos extendimos la promoci√≥n de 2 Cursos por 12.000 abonando el dia de hoy. Como le hab√≠a mencionado anteriormente.`;
            const msgPromo = `Consistir√≠a en *2 cursos completos por $12.000 abonando el dia de hoy* o *dos cursos por 16.000 hasta el 31/01* (cualquier m√©todo), si tiene alguna duda sobre *Metodolog√≠a de Estudio* o *Cursos Disponibles* me dice por aqu√≠ y le enviare informaci√≥n o le llamare. Muchas gracias`
            const msgPromoRaa = 'Ademas de todos nuestros cursos, contamos con una promoci√≥n especial en nuestro Curso de Refrigeraci√≥n y Aire Acondicionado. El cual tiene posibilidad de Matricularse Online';
        
            const chatId = chatsArr[i];
            let hasil3 = fs.readFileSync('media/images/raa/banner-matricula.png', {encoding: 'base64'});
            let media3 = new MessageMedia('image/png', hasil3);
                await awaitTimeout(2000);
                sendMessage(chatId, msgPromo0); 
                await awaitTimeout(5000);
                sendMessage(chatId, msgPromo); 
                await awaitTimeout(5000);
                sendMessage(chatId, msgPromoRaa); 
                await awaitTimeout(5000);
                sendMessage(chatId, media3);
                await awaitTimeout(5000);
                sendMessage(chatId, "Si necesita mas informaci√≥n d√≠game por aqu√≠ o envi√© Menu. Si no le interesa y no quiere que le enviemos mas mensajes por favor d√≠game por aqui mismo");

            

        if(i < chatsArr.length-1){
            doLoop(i+1); 
            }
        }, 10000);
        
        }
    
    doLoop(0);

}





// HABLARLES COMO PERSONA FUNCION // 31/01

let personWsp =async()=>{

    function doLoop(i) {
        let alumno = bdiade[i];
        
        setTimeout(async  ()=> {
            //const number = alumno.Telefono;
    
    
            const msgPromo0 = `Hola ${alumno.Nombre ? `${alumno.Nombre}, buenas`: `buenas`}, mi nombre es Federico, un gusto. Me estoy comunicando desde Escuelas IADE *Cursos Online Certificados* porque usted alguna vez solicito informaci√≥n sobre ${alumno.Curso ? `el ${alumno.Curso}` : `alguno de nuestros Cursos o sobre nuestro Catalogo de Cursos!`}. Me comunico desde el area de promociones ya que contamos con una promoci√≥n por el dia de hoy y hasta el VIERNES inclusive!(15/02 a el 18/02) y otra que dura hasta fin de mes inclusive (28/02) por 18.000:`;
            const msgPromo = `Consistir√≠a en *2 cursos completos por $14.000 abonando el dia de hoy mi√©rcoles, jueves o viernes!* (60% de descuento!) o *dos cursos por 18.000 hasta el 28/02* (cualquier m√©todo), si tiene alguna duda sobre *Metodolog√≠a de Estudio* o *Cursos Disponibles* me dice por aqu√≠ y le enviare informaci√≥n o le llamare. Muchas gracias\n www.escuelasiade.com\n Cursos Online Certificado`;
            const msgPromoRaa = 'Ademas de todos nuestros cursos, contamos con una promoci√≥n especial en nuestro Curso de Refrigeraci√≥n y Aire Acondicionado. El cual tiene posibilidad de Matricularse Online'
        
            const number = alumno.Telefono;
            const chatId = number.substring(1) + "@c.us";
            let hasil3 = fs.readFileSync('media/images/raa/banner-matricula.png', {encoding: 'base64'});
            let media3 = new MessageMedia('image/png', hasil3);
                await awaitTimeout(2000);
                sendMessage(chatId, msgPromo0); 
                await awaitTimeout(5000);
                sendMessage(chatId, msgPromo); 
                await awaitTimeout(5000);
                sendMessage(chatId, msgPromoRaa); 
                await awaitTimeout(5000);
                sendMessage(chatId, media3);
                await awaitTimeout(5000);
                sendMessage(chatId, "Si necesita mas informaci√≥n d√≠game por aqu√≠ o envi√© Menu. Si no le interesa y no quiere que le enviemos mas mensajes por favor d√≠game por aqui mismo");

            

        if(i < bdiade.length-1){
            doLoop(i+1); 
            }
        }, 10000);
        
        }
    
    doLoop(0);

}


// FINAL PROMO LABEL
//bot
let msgPromo = 'Hola Buenas tardes‚ùó‚ùó\n Quer√≠a saber si quer√≠a aprovechar la promoci√≥n antes enviada ya que esta por terminarse.\n‚≠ïD√≠game por aqu√≠ si quiere que lo llame un asesor o si tiene alguna duda o si *quiere inscribirse*!! (se puede pagar en cuotas sin inter√©s con tarjeta de cr√©dito!!)\n‚≠ïPuede presionar el bot√≥n de Menu para ver toda la informaci√≥n disponible\n‚≠ïActualmente tenemos una promoci√≥n de Refrigeraci√≥n y Aire Acondicionado con el cual se puede tramitar la matricula';
//persona
let msgPromo2 = 'Hola buenas tardes, me estoy comunicando desde Escuelas IADE para saber si esta interesado en la promoci√≥n que termino el 10/12 pero que *sigue vigente hasta el dia de hoy 12/12.* Consistir√≠a en 2 cursos completos por 16.000 o un curso por 14.000 abonando el dia de hoy en un pago (cualquier m√©todo), si tiene alguna duda me dice por aqu√≠. Muchas gracias';
let msgSigueInteresado = 'Hola buenas tardes, me comunico para saber si le gustar√≠a aprovechar la promoci√≥n que tenemos ahora vigente e inscribirse en alguno/s de nuestros cursos! Desde ya muchas gracias por su respuesta. Si quiere saber informaci√≥n sobre Cursos disponibles, Metodolog√≠a de Estudio, Certificados, Temarios o que le hagamos una promoci√≥n que se amolde a usted d√≠game por este medio';
let msgPromoEnero  = 'Hola buenas tardes me estoy comunicando de Escuelas IADE Cursos Online Certificados. Por solicitud de alumnos extendimos la promoci√≥n que terminaba el 15-02 hasta ma√±ana 17-02. Le recordamos que un curso completo esta al valor de 14.000 el dia de hoy con otro de regalo, si quiere inscribirse d√≠game por aqu√≠ o envi√© Menu. Si est√° interesado en aprovechar esta oportunidad, por favor h√°ganos saber y le enviaremos informaci√≥n detallada sobre los cursos disponibles, nuestra metodolog√≠a de estudio y los certificados que ofrecemos. Tambi√©n podemos hacerle una promoci√≥n que se amolde a sus necesidades. Si no est√° interesado, por favor env√≠e la letra B y lo excluiremos de nuestra lista de mensajes. Si desea conocer m√°s sobre nuestros cursos y promociones, por favor env√≠e la palabra "menu" y le enviaremos toda la informaci√≥n necesaria o directamente responda este mensaje para que lo asesoremos.';

let hasil3 = fs.readFileSync('media/images/raa/banner-matricula.png', {encoding: 'base64'});
            let media3 = new MessageMedia('image/png', hasil3);

const finalPromo = async()=>{
    function doLoop(i) {
        let number = chatsArr[i];
        setTimeout(async  ()=> {
            const msgPromoRaa = 'Ademas de todos nuestros cursos, contamos con una promoci√≥n especial en nuestro Curso de Refrigeraci√≥n y Aire Acondicionado. El cual tiene posibilidad de Matricularse Online';

            await sendMessage(number, msgPromoEnero);
            sendMessage(number, msgPromoRaa); 
            await awaitTimeout(5000);
            sendMessage(number, media3);
            await awaitTimeout(5000);
            sendMessage(number, "Si necesita mas informaci√≥n d√≠game por aqu√≠ o envi√© Menu. Si no le interesa y no quiere que le enviemos mas mensajes por favor d√≠game por aqui mismo");

        

     if(i < chatsArr.length-1){
        doLoop(i+1); 
         }
     }, 10000);
    
     }

    doLoop(0);
     await sendMessage("5491126642674@c.us", "Se han enviado todos los mensajes de FINALIZA PROMO");
}

// enviar a y menu

const sendCapA= ()=>{
    function doLoop(i) {
        let number = chatsArr[i];
        setTimeout(async  ()=> {
                await sendMessage(number, msgA);
                await sendMessage(number, menuAzafata);

        

     if(i < chatsArr.length-1){
        doLoop(i+1); 
         }
     }, 10000);
    
     }

    doLoop(0);
}

//funcion promesas sasha

// funcion promo wsp


let promoPromesas =()=>{

    function doLoop(i) {
        let alumno = bdiade[i];
        setTimeout(async  ()=> {
            const number = alumno.Telefono;
    
            //msg
            const msgPromesa = `Hola! ${alumno.Nombre} üòÉ\nSabemos que te has interesado en nuestro curso de ${alumno.Curso} y es por ello que tenemos una promoci√≥n especial para vos! üéâ\nHasta el 15 de Enero de 2023 CONGELAMOS NUESTROS PRECIOS ‚ùÑÔ∏è 1 curso x 36000 pesos\n\n‚ùó Abonando con dep√≥sito/transferencia te BONIFICAMOS UN 30% DEL VALOR TOTAL DEL CURSO. üëâ1 CURSO X 25.000\n\n‚ÄºÔ∏è 10 % DE DESCUENTO pagando hasta en 3 CUOTAS con todos nuestros medios de pago \n\nüéÅ Inscribi√©ndote en el d√≠a de hoy te damos 1 CURSO DE REGALO a tu elecci√≥n para que sigas creciendo con nosotros! \n\n ‚≠ï*PRESIONA* A : Para una explicaci√≥n por texto y saber sobre VALOR. \n Para saber el valor presione la letra A \n ‚≠ï*PRESIONA* C : Para una explicaci√≥n por AUDIO. \n\n  *DIGANOS POR AQUI SI QUIERE QUE UN ASESOR SE COMUNIQUE CON USTED* \n\n¬° METODOS DE PAGO !\nTarjeta de cr√©dito / D√©bito / Dep√≥sito / Transferencia / Mercado Pago / Cuenta DNI  / Tarjeta UALA / Rapipago / Pago F√°cil`

            const chatId = number.substring(1) + "@c.us";
            let hasil3 = fs.readFileSync('media/images/banner-promo-17-11.png', {encoding: 'base64'});
            let media3 = new MessageMedia('image/png', hasil3);
                

                if (!chatsArr.includes(chatId)) {
                    //sendMessage(chatId, media3);
                let button = new Buttons(msgPromesa,[{body:'A'},{body:'C'},{body:'SABER MAS'},{body:'CURSOS DISPONIBLES'}],'Promoci√≥n Especial Escuelas IADE','(Presione una letra/opci√≥n para responder)\nFederico Escuelas IADE, area Promociones');
                sendMessage(chatId, button);
                sendMessage(chatId, "en caso de no interesarle este tipo de promociones puede informarnos por este medio! En caso de haber un pago pendiente d√≠game por favor.");
              //  sendMessage(chatId, msgPromo);
                await awaitTimeout(2000);
        }

            

        if(i < bdiade.length-1){
            doLoop(i+1); 
            }
        }, 10000);
        
        }
    
    doLoop(0);
    
}



// funcion enviar a etiqueta
// const etiquetaData = {
//     name: 'Prueba 5/12'
// };
// const etiqueta = new Label(client,etiquetaData);
// async function enviarMensajes(nombreEtiqueta, texto) {
//     // Obtiene el n√∫mero de tel√©fono de todos los contactos en la etiqueta
//     const contactos = await etiqueta.getContacts(nombreEtiqueta);
//     const numeros = contactos.map(contacto => contacto.number);

//     // Env√≠a el mensaje a cada contacto
//     for (const numero of numeros) {
//     await sendMessage(numero, texto);
//     }
// }



// Obtener todos los chats para la etiqueta con ID "MY_LABEL_ID"



//enviarMensajes(Label, "Hola, esto es una prueba");

// let finalizaPromo =()=>{

//     function doLoop(i) {
//         let alumno = bdiade[i];
//         setTimeout(async  ()=> {
//             const number = alumno.Telefono;


//             const msgPromo = `Hola ${alumno.Nombre ? `${alumno.Nombre}, ${buenas tardes} `: `buenas tardes`}, me estoy comunicando desde Escuelas IADE *Cursos Online Certificados* porque usted alguna vez solicito informaci√≥n, quer√≠amos contarle que tenemos\n *Promociones Especiales*üòä de hasta *30%*(dependiendo dia de pago/M√âTODO)\nque quiz√° le podr√≠an interesar sobre el ${alumno.Curso ? `${alumno.Curso}` : `curso del cual solicito informaci√≥n!`}üßë‚Äçüéì.\n\n*PRESIONE/RESPONDA CON LA LETRA*:\nüéä*A* PARA SABER SOBRE LA PROMOCI√ìN.\nüéä*B* SI NO ESTAS INTERESADO. \nüéä*C* SI QUIERE UN AUDIO EXPLICATIVOüéä.\nüéä*CURSOS* SI QUIERE VER EL LISTADO DE CURSOSüéä.\nüéä*METODOLOG√çA* SI QUIERE VER LA METODOLOG√çA EN IM√ÅGENESüéä.`;
//             const msgCodigo = `*Se le genero el c√≥digo √∫nico, util√≠celo para aplicar la promoci√≥n:*`;

//             const msgCodigo2 = `*${idRandom()}*`;
//             const chatId = number.substring(1) + "@c.us";
//             let hasil3 = fs.readFileSync('media/images/banner-promo-17-11.png', {encoding: 'base64'});
//             let media3 = new MessageMedia('image/png', hasil3);
//                 sendMessage(chatId, media3);
//                 let button = new Buttons(msgPromo,[{body:'A'},{body:'C'},{body:'LISTADO DE CURSOS'},{body:'METODOLOG√çA'}],'Promoci√≥n Especial Escuelas IADE','(Presione una letra/opci√≥n para responder)\nFederico Escuelas IADE, area Promociones');
//                 sendMessage(chatId, button);
//                 await awaitTimeout(2000);
//                 sendMessage(chatId, "Responda por este medio para aprovechar la promo!");
//               //  sendMessage(chatId, msgPromo);
//                 await awaitTimeout(2000);



//         if(i < bdiade.length-1){
//             doLoop(i+1); 
//             }
//         }, 10000);

//         }

//     doLoop(0);

// }







// cuantos se mandaron en total codigo

// let resFinal = `Se termino de enviar la promo activada.\nSe han enviado *${msgSends}* mensajes de promo.\nPor favor, limpie y rellene la base de datos.`;
//     let number = "5491126642674" + "@c.us";
//     sendMessage(number, resFinal);
